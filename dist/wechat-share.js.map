{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///wechat-share.js","webpack:///webpack/bootstrap 5bd621e9e8f91f583549","webpack:///./src/WechatShare.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","e","Error","code","apply","undefined","_","JohnnyUtils","WechatShare","url","config","extend","defaults","console","log","self","jsonp","api","data","init","err","default","userAgent","navigator","toLowerCase","Device","wechat","RegExp","test","debug","jsApiList","shareData","appmessage","title","desc","img","link","timeline","prototype","setConfig","wx_data","window","wx","appId","timestamp","nonceStr","signature","update","ready","onMenuShareAppMessage","imgUrl","img_url","trigger","success","cancel","fail","onMenuShareTimeline","sdkReady","callback","getScript","set","arguments","length","isString","playSound","sound","doCallback","playing","play"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,YAAAD,IAEAD,EAAA,YAAAC,KACCK,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAP,WACAS,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,QAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAGAR,EAAA,KDgBM,SAAUL,EAAQD,EAASM,GAEhC,GAAIS,GAAgCC,EAA8BC,GAA8B,SAAWC,EAAQnB,GAEzGiB,GAAgCf,GE1D3B,cAAAkB,GAAA,GAAAC,OAAA,wCAAAD,GAAAE,KAAA,mBAAAF,MACU,cAAAA,GAAA,GAAAC,OAAA,0CAAAD,GAAAE,KAAA,mBAAAF,MFyD4SJ,EAAiC,EAAWE,EAA2E,kBAAnCF,GAAiDA,EAA+BO,MAAMtB,EAASgB,GAAiCD,IAAmEQ,SAAlCN,IAAgDhB,EAAOD,QAAUiB,KAUxnBb,KAAM,SAAUH,EEpEhBuB,EACAC,GFoEC,YE1DL,SAASC,GAAYC,EAAKC,GACtBxB,KAAKwB,OAASJ,EAAEK,OAAOC,EAAUF,OACjCG,QAAQC,IAAI5B,KAAKwB,OACjB,IAAIK,GAAK7B,IACTqB,GAAYS,MAAM9B,KAAKwB,OAAOO,KAAMR,IAAKA,GAAM,SAAUS,GACrDH,EAAKI,KAAKD,IACX,SAAUE,GACTP,QAAQC,IAAIM,KAhBpBb,EAAcA,EAAYc,OAC1B,IAAIC,GAAYC,UAAUD,UAAUE,cAChCC,GACAC,SAAQC,OAAO,kBAAkBC,KAAKN,IAkBtCV,GACAK,IAAK,GACLY,OAAO,EACPC,WACI,aACA,sBACA,wBACA,gBACA,mBACA,gBACA,gBACA,yBACA,yBACA,iBACA,cACA,aACA,cACA,YACA,aACA,YACA,cACA,gBACA,cACA,eACA,cACA,gBACA,iBACA,eACA,cACA,iBACA,iBACA,cACA,aACA,cACA,0BACA,UACA,aACA,YAEJC,WACIC,YACIC,MAAO,GACPC,KAAM,GACNC,IAAK,GACLC,KAAM,IACPC,UACCJ,MAAO,GACPE,IAAK,GACLC,KAAM,KAOlB5B,GAAY8B,UAAUC,UAAY,SAAUC,GACxC,GAAIzB,GAAO7B,IACX,KACIuD,OAAOC,GAAGhC,QACNmB,MAAOd,EAAKL,OAAOmB,MACnBc,MAAOH,EAAQG,MACfC,UAAWJ,EAAQI,UACnBC,SAAUL,EAAQK,SAClBC,UAAWN,EAAQM,UACnBhB,UAAWf,EAAKL,OAAOoB,YAE7B,MAAO7B,MAMbO,EAAY8B,UAAUS,OAAS,WAC3B,IACI,GAAIhC,GAAO7B,IAEXuD,QAAOC,GAAGM,MAAM,WACZP,OAAOC,GAAGO,uBACNhB,MAAOlB,EAAKL,OAAOqB,UAAUC,WAAWC,MACxCC,KAAMnB,EAAKL,OAAOqB,UAAUC,WAAWE,KACvCE,KAAMrB,EAAKL,OAAOqB,UAAUC,WAAWI,KACvCc,OAAQnC,EAAKL,OAAOqB,UAAUC,WAAWmB,QACzCC,QAASrC,EAAKL,OAAOqB,UAAUC,WAAWoB,QAC1CC,QAAStC,EAAKL,OAAOqB,UAAUC,WAAWqB,SAAW,aAClDC,OAAQvC,EAAKL,OAAOqB,UAAUC,WAAWsB,QAAU,aACnDC,KAAMxC,EAAKL,OAAOqB,UAAUC,WAAWuB,MAAQ,eAGtDd,OAAOC,GAAGc,qBACNvB,MAAOlB,EAAKL,OAAOqB,UAAUM,SAASJ,MACtCG,KAAMrB,EAAKL,OAAOqB,UAAUM,SAASD,KACrCc,OAAQnC,EAAKL,OAAOqB,UAAUM,SAASc,QACvCC,QAASrC,EAAKL,OAAOqB,UAAUM,SAASe,QACxCC,QAAStC,EAAKL,OAAOqB,UAAUM,SAASgB,SAAW,aAEnDC,OAAQvC,EAAKL,OAAOqB,UAAUM,SAASiB,QAAU,aAEjDC,KAAMxC,EAAKL,OAAOqB,UAAUM,SAASkB,MAAQ,iBAIvD,MAAOtD,MAGbO,EAAY8B,UAAUmB,SAAW,SAAUC,GAClCjB,OAAOC,GAKRgB,EAASjB,OAAOC,IAJhBnC,EAAYoD,UAAU,2CAA4C,WAC9DD,EAASjB,OAAOC,OAO5BlC,EAAY8B,UAAUnB,KAAO,SAAUT,GACnC,GAAIK,GAAO7B,IACX6B,GAAK0C,SAAS,WACV1C,EAAKwB,UAAU7B,GACfK,EAAKgC,YAIbvC,EAAY8B,UAAUsB,IAAM,WAEC,IAArBC,UAAUC,QAAgBxD,EAAEyD,SAASF,UAAU,KAAOvD,EAAEyD,SAASF,UAAU,IAC3E3E,KAAKwB,OAAOqB,UAAU8B,UAAU,IAAIA,UAAU,IAAMA,UAAU,GAE9DhD,QAAQC,IAAI,6BAGpBN,EAAY8B,UAAU0B,UAAY,SAAUC,EAAOP,GAG/C,QAASQ,KACDR,GACAA,EAASO,EAAME,WAJvB,GAAIpD,GAAO7B,IAQPuC,GAAOC,OACPX,EAAK0C,SAAS,SAAUf,GACpBA,EAAGM,MAAM,WACLiB,EAAMG,OACNF,SAKRD,EAAMG,OACNF,MAMRnF,EAAOD,QAAU0B","file":"wechat-share.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WechatShare\"] = factory();\n\telse\n\t\troot[\"WechatShare\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WechatShare\"] = factory();\n\telse\n\t\troot[\"WechatShare\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, !(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"underscore\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), !(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"johnny-utils\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    } else if (typeof exports !== \"undefined\") {\n\t        factory(module, require('underscore'), require('johnny-utils'));\n\t    } else {\n\t        var mod = {\n\t            exports: {}\n\t        };\n\t        factory(mod, global.underscore, global.johnnyUtils);\n\t        global.WechatShare = mod.exports;\n\t    }\n\t})(this, function (module, _, JohnnyUtils) {\n\t    'use strict';\n\t\n\t    JohnnyUtils = JohnnyUtils.default;\n\t    var userAgent = navigator.userAgent.toLowerCase();\n\t    var Device = {\n\t        wechat: RegExp(\"micromessenger\").test(userAgent) ? true : false\n\t    };\n\t\n\t    function WechatShare(url, config) {\n\t        this.config = _.extend(defaults, config || {});\n\t        console.log(this.config);\n\t        var self = this;\n\t        JohnnyUtils.jsonp(this.config.api, { url: url }, function (data) {\n\t            self.init(data);\n\t        }, function (err) {\n\t            console.log(err);\n\t        });\n\t    }\n\t\n\t    var defaults = {\n\t        api: '',\n\t        debug: false,\n\t        jsApiList: ['checkJsApi', 'onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'hideMenuItems', 'showMenuItems', 'hideAllNonBaseMenuItem', 'showAllNonBaseMenuItem', 'translateVoice', 'startRecord', 'stopRecord', 'onRecordEnd', 'playVoice', 'pauseVoice', 'stopVoice', 'uploadVoice', 'downloadVoice', 'chooseImage', 'previewImage', 'uploadImage', 'downloadImage', 'getNetworkType', 'openLocation', 'getLocation', 'hideOptionMenu', 'showOptionMenu', 'closeWindow', 'scanQRCode', 'chooseWXPay', 'openProductSpecificView', 'addCard', 'chooseCard', 'openCard'],\n\t        shareData: {\n\t            appmessage: {\n\t                title: \"\",\n\t                desc: \"\",\n\t                img: \"\",\n\t                link: \"\"\n\t            }, timeline: {\n\t                title: \"\",\n\t                img: \"\",\n\t                link: \"\"\n\t            }\n\t        }\n\t\n\t    };\n\t\n\t    WechatShare.prototype.setConfig = function (wx_data) {\n\t        var self = this;\n\t        try {\n\t            window.wx.config({\n\t                debug: self.config.debug,\n\t                appId: wx_data.appId,\n\t                timestamp: wx_data.timestamp,\n\t                nonceStr: wx_data.nonceStr,\n\t                signature: wx_data.signature,\n\t                jsApiList: self.config.jsApiList\n\t            });\n\t        } catch (e) {}\n\t    };\n\t\n\t    WechatShare.prototype.update = function () {\n\t        try {\n\t            var self = this;\n\t\n\t            window.wx.ready(function () {\n\t                window.wx.onMenuShareAppMessage({\n\t                    title: self.config.shareData.appmessage.title,\n\t                    desc: self.config.shareData.appmessage.desc,\n\t                    link: self.config.shareData.appmessage.link,\n\t                    imgUrl: self.config.shareData.appmessage.img_url,\n\t                    trigger: self.config.shareData.appmessage.trigger,\n\t                    success: self.config.shareData.appmessage.success || function () {}, cancel: self.config.shareData.appmessage.cancel || function () {}, fail: self.config.shareData.appmessage.fail || function () {}\n\t                });\n\t                window.wx.onMenuShareTimeline({\n\t                    title: self.config.shareData.timeline.title,\n\t                    link: self.config.shareData.timeline.link,\n\t                    imgUrl: self.config.shareData.timeline.img_url,\n\t                    trigger: self.config.shareData.timeline.trigger,\n\t                    success: self.config.shareData.timeline.success || function () {},\n\t                    cancel: self.config.shareData.timeline.cancel || function () {},\n\t                    fail: self.config.shareData.timeline.fail || function () {}\n\t                });\n\t            });\n\t        } catch (e) {}\n\t    };\n\t    WechatShare.prototype.sdkReady = function (callback) {\n\t        if (!window.wx) {\n\t            JohnnyUtils.getScript('//res.wx.qq.com/open/js/jweixin-1.2.0.js', function () {\n\t                callback(window.wx);\n\t            });\n\t        } else {\n\t            callback(window.wx);\n\t        }\n\t    };\n\t\n\t    WechatShare.prototype.init = function (config) {\n\t        var self = this;\n\t        self.sdkReady(function () {\n\t            self.setConfig(config);\n\t            self.update();\n\t        });\n\t    };\n\t\n\t    WechatShare.prototype.set = function () {\n\t\n\t        if (arguments.length === 3 && _.isString(arguments[0]) && _.isString(arguments[1])) {\n\t            this.config.shareData[arguments[0]][arguments[1]] = arguments[2];\n\t        } else {\n\t            console.log('[WechatShare] set 函数参数错误');\n\t        }\n\t    };\n\t    WechatShare.prototype.playSound = function (sound, callback) {\n\t        var self = this;\n\t\n\t        function doCallback() {\n\t            if (callback) {\n\t                callback(sound.playing());\n\t            }\n\t        }\n\t\n\t        if (Device.wechat) {\n\t            self.sdkReady(function (wx) {\n\t                wx.ready(function () {\n\t                    sound.play();\n\t                    doCallback();\n\t                });\n\t            });\n\t        } else {\n\t            sound.play();\n\t            doCallback();\n\t        }\n\t    };\n\t\n\t    module.exports = WechatShare;\n\t});\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// wechat-share.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5bd621e9e8f91f583549","var _ = require('underscore')\nvar JohnnyUtils = require('johnny-utils')\nJohnnyUtils = JohnnyUtils.default\nvar userAgent = navigator.userAgent.toLowerCase();\nvar Device = {\n    wechat: RegExp(\"micromessenger\").test(userAgent) ? true : false,\n};\n\n/**\n * 微信分享\n */\nfunction WechatShare(url, config) {\n    this.config = _.extend(defaults, config || {});\n    console.log(this.config)\n    var self=this;\n    JohnnyUtils.jsonp(this.config.api, {url: url}, function (data) {\n        self.init(data);\n    }, function (err) {\n        console.log(err)\n    })\n}\n\n//默认参数\nvar defaults = {\n    api: '', //授权链接\n    debug: false,\n    jsApiList: [\n        'checkJsApi',\n        'onMenuShareTimeline',\n        'onMenuShareAppMessage',\n        'onMenuShareQQ',\n        'onMenuShareWeibo',\n        'hideMenuItems',\n        'showMenuItems',\n        'hideAllNonBaseMenuItem',\n        'showAllNonBaseMenuItem',\n        'translateVoice',\n        'startRecord',\n        'stopRecord',\n        'onRecordEnd',\n        'playVoice',\n        'pauseVoice',\n        'stopVoice',\n        'uploadVoice',\n        'downloadVoice',\n        'chooseImage',\n        'previewImage',\n        'uploadImage',\n        'downloadImage',\n        'getNetworkType',\n        'openLocation',\n        'getLocation',\n        'hideOptionMenu',\n        'showOptionMenu',\n        'closeWindow',\n        'scanQRCode',\n        'chooseWXPay',\n        'openProductSpecificView',\n        'addCard',\n        'chooseCard',\n        'openCard'\n    ],\n    shareData: {\n        appmessage: {\n            title: \"\",\n            desc: \"\",\n            img: \"\",\n            link: \"\"\n        }, timeline: {\n            title: \"\",\n            img: \"\",\n            link: \"\"\n        }\n    }\n\n};\n\n\nWechatShare.prototype.setConfig = function (wx_data) {\n    var self = this;\n    try {\n        window.wx.config({\n            debug: self.config.debug,\n            appId: wx_data.appId,\n            timestamp: wx_data.timestamp,\n            nonceStr: wx_data.nonceStr,\n            signature: wx_data.signature,\n            jsApiList: self.config.jsApiList\n        });\n    } catch (e) {\n\n    }\n};\n\n\nWechatShare.prototype.update = function () {\n    try {\n        var self = this;\n\n        window.wx.ready(function () {\n            window.wx.onMenuShareAppMessage({\n                title: self.config.shareData.appmessage.title,\n                desc: self.config.shareData.appmessage.desc,\n                link: self.config.shareData.appmessage.link,\n                imgUrl: self.config.shareData.appmessage.img_url,\n                trigger: self.config.shareData.appmessage.trigger,\n                success: self.config.shareData.appmessage.success || function () {\n                }, cancel: self.config.shareData.appmessage.cancel || function () {\n                }, fail: self.config.shareData.appmessage.fail || function () {\n                }\n            });\n            window.wx.onMenuShareTimeline({\n                title: self.config.shareData.timeline.title,\n                link: self.config.shareData.timeline.link,\n                imgUrl: self.config.shareData.timeline.img_url,\n                trigger: self.config.shareData.timeline.trigger,\n                success: self.config.shareData.timeline.success || function () {\n                },\n                cancel: self.config.shareData.timeline.cancel || function () {\n                },\n                fail: self.config.shareData.timeline.fail || function () {\n                }\n            })\n        })\n    } catch (e) {\n    }\n};\nWechatShare.prototype.sdkReady = function (callback) {\n    if (!window.wx) {\n        JohnnyUtils.getScript('//res.wx.qq.com/open/js/jweixin-1.2.0.js', function () {\n            callback(window.wx)\n        })\n    } else {\n        callback(window.wx);\n    }\n};\n\nWechatShare.prototype.init = function (config) {\n    var self = this;\n    self.sdkReady(function () {\n        self.setConfig(config);\n        self.update();\n    })\n};\n\nWechatShare.prototype.set = function () {\n\n    if (arguments.length === 3 && _.isString(arguments[0]) && _.isString(arguments[1])) {\n        this.config.shareData[arguments[0]][arguments[1]] = arguments[2];\n    } else {\n        console.log('[WechatShare] set 函数参数错误')\n    }\n};\nWechatShare.prototype.playSound = function (sound, callback) {\n    var self = this;\n\n    function doCallback() {\n        if (callback) {\n            callback(sound.playing())\n        }\n    }\n\n    if (Device.wechat) {\n        self.sdkReady(function (wx) {\n            wx.ready(function () {\n                sound.play();\n                doCallback()\n\n            })\n        });\n    } else {\n        sound.play();\n        doCallback()\n    }\n    // alert(sound.playing())\n};\n\n\nmodule.exports = WechatShare;\n\n\n// WEBPACK FOOTER //\n// ./src/WechatShare.js"],"sourceRoot":""}